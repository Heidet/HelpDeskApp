{% extends "layout.html.twig" %}
{% block title %}{{ parent() }} - Nouveau-Ticket{% endblock %}
{% block content %}
    <script>


  $( function() {
    function log( message ) {
      $( "<input>" ).text( message ).prependTo( "#prenom" );
      $( "#prenom" ).scrollTop( 0 );
    }
 
    $( "#numeroClient" ).autocomplete({
      source: function( request, response ) {
        $.ajax( {
          url: "http://localhost:8888/index.php?action=listClients",
          dataType: "json",
          data: {
            nom: request.nom
          },
          success: function( data ) {
            
            data.forEach(function (datas) {
         
            //console.log(datas.nom)
            })
            response( data );
            console.log(data);

          }
        } );
      },
      //minLength: 2,
      /*select: function( event, ui ) {
        log( "Selected: " + ui.item.nom + " aka " + ui.item.prenom);
      }*/
    } );
  } );


  </script>

<div class="container-fluid mt-3">
  <div class="row">        
      <div class="col-lg-12">
        <div class="col-md-4 mb-3">
            Numéro d'incident : <strong>Nouveau{{ ticket.id }}</strong>
        </div>
          <form class="needs-validation" action="" method="post" novalidate>
            <div class="form-row">
                <div class="col-md-4 mb-3">
                <div class="ui-widget">
                    <label for="validationTooltip01">Numéro Client</label>
                    <input type="text" class="form-control" id="numeroClient"   name="numeroClient" value="{{ client.id }}" required>
                      <div class="invalid-tooltip">
                        Saisir le numéro de client.
                      </div>
                </div>
                </div>

              <div class="col-md-4 mb-3">
              <div class="ui-widget">
                <label for="validationTooltip02">Nom</label>
                <input type="text" class="form-control" id="nom"  name="nom" value="{{ client.nom }}" required>
              </div>
                  <div class="invalid-tooltip">
                    Saisir l'utilisateur.
                  </div>
              </div>

              <div class="col-md-4 mb-3">
              <div class="ui-widget">
                <label for="validationTooltip02">Prenom</label>
                <input type="text" class="ui-widget-content" id="prenom"  name="prenom" value="{{ client.prenom }}" required>
              </div>
                  <div class="invalid-tooltip">
                    Saisir le Prenom.
                  </div>
              </div>

              <div class="col-md-4 mb-3">
                <label for="validationTooltipUsername">Mail</label>
                  <div class="input-group">
                      <div class="input-group-prepend">
                        <span class="input-group-text" id="validationTooltipUsernamePrepend">@</span>
                      </div>
                    <input type="text" class="form-control" id="mail"
                      aria-describedby="validationTooltipUsernamePrepend"  name="mail" value="{{ client.mail }}" required>
                      <div class="invalid-tooltip">
                        Saisir l'adresse mail utilisateur.
                      </div>
                  </div>
              </div>

              <div class="col-md-4 mb-3">
                    <label for="validationTooltip03">Ville</label>
                    <input type="text" class="form-control" id="ville"  name="ville" value="{{ client.ville }}" required>
                      <div class="invalid-tooltip">
                        Saisir une Ville.
                      </div>
              </div>

              <div class="col-md-3 mb-3">
                  <label for="validationTooltip05">Zip</label>
                  <input type="text" class="form-control" id="zip"  name="zip" value="{{ client.zip }}" required>
                    <div class="invalid-tooltip">
                      Saisir code postal.
                    </div>
              </div>

              <div class="col-md-3 mb-3">
                  <label for="validationTooltip05">Contact</label>
                  <input type="text" class="form-control" id="contact"  name="contact" value="{{ client.contact }}" required>
                    <div class="invalid-tooltip">
                      Saisir le contact.
                    </div>
                </div>

                <div class="form-group col-md-3 mb-3">
                  <label for="exampleFormControlSelect1">Priorité</label>
                    <select class="form-control" id="priorite"  name="priorite" value="{{ ticket.priorite }}" >
                      <option>1</option>
                      <option>2</option>
                      <option>3</option>
                      <option>4</option>
                      <option>5</option>
                    </select>
                </div>

                <div class="form-group col-md-3 mb-3 ml-5">
                  <label for="exampleFormControlSelect1">Catégorie</label>
                  <select class="form-control" id="categorie"  name="categorie" value="{{ ticket.categorie }}">
                    <option>1</option>
                    <option>2</option>
                    <option>3</option>
                    <option>4</option>
                    <option>5</option>
                  </select>
                </div>

            </div>

            

            <div class="form-row">
              <div class="col-md-4 mb-3">
                <label for="validationTooltip01">Titre</label>
                  <input type="text" class="form-control" id="titre"  name="titre" value="{{ ticket.titre }}" required>
                    <div class="invalid-tooltip">
                      Saisir le titre.
                    </div>
              </div>
            </div> 

            <div class="form-row">
                <div class="col-md-10  mb-0">
                  <label for="validationTextarea"></label>
                  <textarea class="form-control" id="contenu"  name="contenu" rows="6" value="" placeholder=""
                    required>{{ ticket.contenu }}</textarea>
                    <div class="invalid-feedback">
                      Saisir l'incident.
                    </div>
                </div>
                <div class="form-group col-md-5 mb-4 ">
                  <label for="exampleFormControlFile1">Pièce jointe</label>
                  <input type="file" class="form-control-file" id="document"  name="document" value="">
                </div>
            </div> 
            <p><button class="btn btn-primary" type="submit">Enregistrer</button></p>

      </form>
    </div>
  </div>
{% endblock %}
